@using Signum.Utilities.ExpressionTrees
@using Signum.Engine.Cache
@using Signum.Web.Cache
@model List<CacheStatistics>
<h2>@ViewData[ViewDataKeys.Title]</h2>
<div>
    <a href="@Url.Action((CacheController pc) => pc.Disable())" class="sf-button" style="@(!CacheLogic.GloballyDisabled ? "" : "display:none");color:red" id="sfCacheDisable">
        Disable </a><a href="@Url.Action((CacheController pc) => pc.Enable())" class="sf-button"  style="@(CacheLogic.GloballyDisabled ? "" : "display:none")" id="sfCacheEnable">
            Enable </a><a href="@Url.Action((CacheController pc) => pc.Clean())" class="sf-button" id="sfCacheClear">
                Clean </a>
</div>
<table class="sf-search-results sf-stats-table">
    <thead>
        <tr>
            <th>
                Type
            </th>
            <th>
                AttachedEvents
            </th>
            <th>
                Count
            </th>
            <th>
                Invalidations
            </th>
            <th>
                Loads
            </th>
            <th>
                Hits
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Type.Name
                </td>
                <td>@item.Cached
                </td>
                <td>@(item.Count.TryToString() ?? "-- not loaded --")
                </td>
                <td>@item.Invalidations.DefaultToNull()
                </td>
                <td>@item.Loads.DefaultToNull()
                </td>
                <td>@item.Hits.DefaultToNull()
                </td>
            </tr>
        }
    </tbody>
</table>
@Html.ScriptsJs("~/Cache/Scripts/SF_Cache.js")
