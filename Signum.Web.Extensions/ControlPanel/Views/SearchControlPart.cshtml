@using System.Configuration
@using Signum.Entities.ControlPanel
@using Signum.Web.ControlPanel
@using Signum.Entities.DynamicQuery
@using Signum.Entities.UserQueries
@using Signum.Web.UserQueries

@using (var tc = Html.TypeContext<UserQueryPartDN>())
{
    UserQueryDN uq = tc.Value.UserQuery;
    object queryName = Navigator.Manager.QuerySettings.Keys.FirstEx(k => QueryUtils.GetQueryUniqueKey(k) == uq.Query.Key);
    
    FindOptions fo = new FindOptions(queryName)
    {
        ShowHeader = false,
        ShowFooter = false,
        AllowSelection = false,
        SearchOnLoad = true,
    };

    @Html.SearchControl(uq, fo, new Context(null, Model.Prefix));
}