@using System.Configuration
@using Signum.Entities.ControlPanel
@using Signum.Web.ControlPanel
@using Signum.Entities.DynamicQuery
@using Signum.Entities.Reports
@using Signum.Web.UserQueries

@using (var tc = Html.TypeContext<CountSearchControlPartDN>())
{
    <div class="sf-cp-count-uq-list form-sm form-horizontal">
        @foreach (CountUserQueryElementDN uq in tc.Value.UserQueries)
        {
            object queryName = Navigator.Manager.QuerySettings.Keys.FirstEx(k => QueryUtils.GetQueryUniqueKey(k) == uq.UserQuery.Query.Key);
            FindOptions fo = new FindOptions(queryName)
            {
                ShowFilters = false
            };

            fo.ApplyUserQuery(uq.UserQuery);
            @Html.CountSearchControl(tc, fo, csc => { csc.Navigate = true; csc.Href = uq.Href; csc.QueryLabelText = uq.Label.DefaultText(null); })
        }
    </div>
}